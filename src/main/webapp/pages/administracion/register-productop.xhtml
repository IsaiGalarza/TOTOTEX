
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:p="http://primefaces.org/ui"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:a="http://richfaces.org/a"
    xmlns:mj="http://mojarra.dev.java.net/mojarra_ext"
    template="/WEB-INF/templates/templateParametrizacion.xhtml" >

    <ui:define name="head">
    	<title>:: Registrar Producto ::</title>
    </ui:define>
    
    <ui:define name="header">

        	<div class="panel-body" style="padding: 0px 0px 0px 0px;">
        	<div class="row">
        		  <div class="col-sm-6 col-md-3" align="left" >
				      <div class="thumbnail">
				         				        <h:graphicImage sclass="thumbnail" name="logo.jpg" library="gfx" width="60px;" height="50px;"/>
				      </div>
				  </div>
				  <div class="col-sm-6 col-md-3">
				    	<h2><span class="label label-default">Gestion de Productos</span></h2>
				  </div>
		    </div>
        	</div>
   	</ui:define>
    
    <ui:define name="content">
		<h:form id="formRegistroProducto"  styleClass="form-horizontal">
			 
			 <div class="panel panel-default">
							   <div class="panel-heading">
							      <h3 class="panel-title">
							         <strong>#{productopController.tituloPanel}</strong>
							      </h3>
							   </div>
							   <div class="panel-body">
			 
			 <div class="row">
				  <div class="col-sm-6 col-md-3" align="left" style="padding: 0px 0px 0px 0px;">
				  	<h:panelGrid columns="3">
				  		<h:outputLabel value="Codigo_Producto" for="codigoID" />
						<p:inputText id="codigoID"  styleClass="form-control" value="#{productopController.newProducto.codigoProducto}" required="true" requiredMessage="Codigo Requerido." size="20"/>
						<p:message for="codigoID"/>
						
						<h:outputLabel value="Nombre_Producto" for="nombreID"/>
						<p:inputText id="nombreID"  styleClass="form-control" value="#{productopController.newProducto.nombreProducto}" required="true" requiredMessage="Nombre Requerido." size="20"/>
						<p:message for="nombreID"/>
						
						<h:outputLabel value="Codigo_Barra" for="codigoBarraID"/>
						<p:inputText id="codigoBarraID"  styleClass="form-control" value="#{productopController.newProducto.codigoBarra}" required="false" requiredMessage="Codigo Barra Requerido." size="40"/>
						<p:message for="codigoBarraID"/>
						
						<h:outputLabel value="Codigo_Contable" for="codigoLineaID"/>
						<p:inputText id="codigoLineaID"  styleClass="form-control" value="#{productopController.newProducto.codigoLinea}" required="false" requiredMessage="Codigo Linea Requerido." size="10" validatorMessage="Rango Invalido [10]"/>
						<p:message for="codigoLineaID"/>
						
						<h:outputLabel value="Tipo_Producto" for="tipoProductoID"/>
						<h:selectOneMenu id="tipoProductoID"
							value="#{productopController.id_TipoProducto}"
							styleClass="form-control" effect="fade" required="true"
							requiredMessage="Requerido.">
							<f:selectItems
								value="#{productopController.listaTipoProducto}"
								var="_pro" itemLabel="#{_pro.descripcion}" itemValue="#{_pro.id}" />
							<p:ajax event="change" />
						</h:selectOneMenu>
						<p:message for="tipoProductoID"/>
						
						<h:outputLabel value="Grupo/Categoria" for="grupoID"/>
						<h:selectOneMenu id="grupoID"
							value="#{productopController.id_GrupoProducto}"
							styleClass="form-control" effect="fade" required="true"
							requiredMessage="Requerido.">
							<f:selectItems
								value="#{productopController.listaGrupoProducto}"
								var="_pro" itemLabel="#{_pro.descripcion}" itemValue="#{_pro.id}" />
							<p:ajax event="change" />
						</h:selectOneMenu>
						<p:message for="grupoID"/>
						
				  	</h:panelGrid>
				  </div>
				   
				  <div class="col-sm-6 col-md-3" align="left" style="padding: 0px 0px 0px 0px;">
				  	<h:panelGrid columns="3">
				  	
						<h:outputLabel value="Proveedor" for="proveedorID"/>
						<h:selectOneMenu id="proveedorID"
							value="#{productopController.id_Proveedor}"
							styleClass="form-control" effect="fade" required="true"
							requiredMessage="Requerido.">
							<f:selectItems
								value="#{productopController.listaProveedor}"
								var="_pro" itemLabel="#{_pro.nombre}" itemValue="#{_pro.id}" />
							<p:ajax event="change" />
						</h:selectOneMenu>
						<p:message for="proveedorID"/>
						
						<h:outputLabel value="Linea_Proveedor" for="lineaID"/>
						<h:selectOneMenu id="lineaID"
							value="#{productopController.id_LineasProveedor}"
							styleClass="form-control" effect="fade" required="true"
							requiredMessage="Requerido.">
							<f:selectItems
								value="#{productopController.listalineasProveedor}"
								var="_pro" itemLabel="#{_pro.nombre}" itemValue="#{_pro.id}" />
							<p:ajax event="change" />
						</h:selectOneMenu>
						<p:message for="lineaID"/>
						
											
						<h:outputLabel value="Presentacion" for="presentacionID"/>
						<h:selectOneMenu id="presentacionID"
							value="#{productopController.id_CantUnitPres}"
							styleClass="form-control" effect="fade" required="true"
							requiredMessage="Requerido.">
							<f:selectItems
								value="#{productopController.listaCantidadUnidadPresentacion}"
								var="_pro" itemLabel="#{_pro.presentacion.descripcion.toUpperCase()} #{_pro.cantidad} #{_pro.unidadMedida.descripcion.toUpperCase()}" itemValue="#{_pro.id}" />
							<p:ajax event="change" />
						</h:selectOneMenu>
						<p:message for="presentacionID"/>
						
						
						
						<h:outputLabel value="Area_Producto" for="areaID"/>
						<h:selectOneMenu id="areaID"
							value="#{productopController.id_AreaProducto}"
							styleClass="form-control" effect="fade" required="true"
							requiredMessage="Requerido.">
							<f:selectItems
								value="#{productopController.listaAreaProducto}"
								var="_pro" itemLabel="#{_pro.descripcion}" itemValue="#{_pro.id}" />
							<p:ajax event="change" />
						</h:selectOneMenu>
						<p:message for="areaID"/>
						
						<h:outputLabel value="Forma_Farmaceutica" for="formaID"/>
						<h:selectOneMenu id="formaID"
							value="#{productopController.id_FormaFarmaceutica}"
							styleClass="form-control" effect="fade" required="true"
							requiredMessage="Requerido.">
							<f:selectItems
								value="#{productopController.listaFormaFarmaceutica}"
								var="_pro" itemLabel="#{_pro.descripcion}" itemValue="#{_pro.id}" />
							<p:ajax event="change" />
						</h:selectOneMenu>
						<p:message for="formaID"/>
						
				  						  	</h:panelGrid>
				  </div>
				  <div class="col-sm-6 col-md-3" align="left" style="padding: 0px 0px 0px 0px;">
				  	<h:panelGrid columns="3">
				  	<h:outputLabel value="Stock_Actual" for="stockActualID"/>
						<p:spinner id="stockActualID" value="#{productopController.newProducto.stockActual}" required="true" requiredMessage="Stock Actual Requerido."/>
						<p:message for="stockActualID"/>
						
						<h:outputLabel value="Stock_Minimo" for="stockMinimoID"/>
						<p:spinner id="stockMinimoID" value="#{productopController.newProducto.stockMinimo}" required="true" requiredMessage="Stock Minimo Requerido."/>
						<p:message for="stockMinimoID"/>
						
						<h:outputLabel value="Stock_Maximo" for="stockMaximoID"/>
						<p:spinner id="stockMaximoID" value="#{productopController.newProducto.stockMaximo}" required="true" requiredMessage="Stock Maximo Requerido."/>
						<p:message for="stockMaximoID"/>
				  	
				  		<h:outputLabel value="Precio_Venta" for="precioVentaID"/>
						<p:spinner id="precioVentaID" value="#{productopController.newProducto.precioUnitarioVenta}" required="true" requiredMessage="Precio Venta Requerido."/>
						<p:message for="precioVentaID"/>		
						<h:outputLabel value="Precio_Compra" for="precioCompraID"/>
						<p:spinner id="precioCompraID" value="#{productopController.newProducto.precioUnitarioCompra}" required="true" requiredMessage="Precio Compra Requerido."/>
						<p:message for="precioCompraID"/>
						
						<h:outputLabel value="Fecha_Vencimiento" for="fechaVencimientoID"/>
						<p:calendar id="fechaVencimientoID" showOn="button"  
							value="#{productopController.newProducto.fechaVencimiento}" datePattern="DD/MM/YYYY" required="false" requiredMessage="Fecha Vencimiento Requerido." />
						<p:message for="fechaVencimientoID"/>
				  	</h:panelGrid>
				  </div>
				  <div class="col-sm-6 col-md-3" align="left" style="padding: 0px 0px 0px 0px;">
				  	<h:panelGrid columns="3">
				  		<h:outputLabel value="Estado" for="estadoID"/>
						<h:selectOneMenu id="estadoID" value="#{productopController.newProducto.estado}" styleClass="form-control" required="true" requiredMessage="Estado Requerido.">  
									<f:selectItem itemValue="AC" itemLabel="Activo" />
						            <f:selectItem itemValue="IN" itemLabel="Inactivo" />
									<p:ajax event="change" update="estadoID"/>
						</h:selectOneMenu>
						<p:message for="estadoID"/>
						
						<h:outputLabel value="Fecha_Registro" for="fechaRegistroID"/>
						<p:calendar id="fechaRegistroID" showOn="button"  
							value="#{productopController.newProducto.fechaRegistro}"  datePattern="dd/MM/yyyy" disabled="true" required="true" requiredMessage="Fecha Registro Requerido." />
						<p:message for="fechaRegistroID"/>
						
						<h:outputLabel value="Registro" for="usuarioRegistroID"/>
						<p:inputText id="usuarioRegistroID"  styleClass="form-control" value="#{productopController.newProducto.usuarioRegistro}" disabled="true" required="true" requiredMessage="Usuario Registro Requerido."/>
						<p:message for="usuarioRegistroID"/>
				  	</h:panelGrid>
				  </div>
			</div>
			
			 
			
			</div>
			<div class="panel-footer">
			   
			   <div class="btn-group btn-group-sm">
				
				<p:commandButton rendered="#{productopController.modificar=='true'}" icon="ui-icon-minus"
					action="#{productopController.initNewProducto()}" style="width: 150px;"
					update=":formRegistroProducto"
					styleClass="btn btn-default" value="Cancelar" type="submit" />
			   
				<p:commandButton rendered="#{productopController.modificar=='false'}" icon="ui-icon-disk" 
					action="#{productopController.registrarProducto()}" style="width: 150px;"
					update=":formRegistroProducto"
					styleClass="btn btn-primary" value="Guardar" type="submit" />
				
				<p:commandButton rendered="#{productopController.modificar=='true'}" icon="ui-icon-refresh" 
					action="#{productopController.modificarProducto()}" style="width: 150px;"
					update=":formRegistroProducto"
					styleClass="btn btn-primary" value="Modificar" type="submit" />
					
				<p:commandButton rendered="#{productopController.modificar=='true'}" icon="ui-icon-circle-close" 
					action="#{productopController.eliminarProducto()}" style="width: 150px;"
					update=":formRegistroProducto"
					styleClass="btn btn-danger" value="Borrar" type="submit" />
				
				</div>
				
			</div>
			</div>
			
			
	        <div id="newServiciosMessages" class="update"/>
			
			<h:panelGroup rendered="#{empty productosp}">
                <em>No se encontraron Productos Registrados.</em>
            </h:panelGroup>
            
            
            <div class="panel panel-default">
				      <!-- Default panel contents -->
				      <div class="panel-heading">
				      	<center>
				      		<strong>LISTA DE PRODUCTOS</strong>
				      	</center>
				      </div>
				
				      <!-- Table -->
				      <div class="table-responsive">
             
             			<p:dataTable styleClass="table table-condensed table-hover table-responsive table-striped table-bordered" 
             				selection="#{productopController.selectedProducto}" selectionMode="single" rowKey="#{_producto.id}"
             				paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
	       					rowsPerPageTemplate="10 20 30 40 50" first="0" paginator="true" rows="10"
				        	id="productosTable" var="_producto" value="#{productosp}" rendered="#{not empty productosp}" >
				        	
				        	<p:ajax  event="rowSelect" update=":formRegistroProducto"
				        		listener="#{productopController.onRowSelectProductoClick}" />	
				        	
				        	<p:column headerText="ID">
				        		<span class="label label-primary"><h:outputText value="PRO-#{_producto.id}" /></span>
				        	</p:column>
				        	
				        	<p:column headerText="Codigo Producto">
				        		<span class="label label-success"><h:outputText value="#{_producto.codigoProducto}" /></span>
				        	</p:column>
				        	
				        	<p:column headerText="Nombre">
				        		<h:outputText value="#{_producto.nombreProducto}" />
				        	</p:column>
				        	<p:column headerText="Stock Actual" >
				        		<h:outputText value="#{_producto.stockActual}"/>
				        	</p:column>
				        	<p:column headerText="Stock Minimo" >
				        		<h:outputText value="#{_producto.stockMinimo}"/>
				        	</p:column>
				        	<p:column headerText="Stock Maximo" >
				        		<h:outputText value="#{_producto.stockMaximo}"/>
				        	</p:column>
				        	
				        	<p:column headerText="P. Venta" >
				        		<h:outputText value="Bs.- #{_producto.precioUnitarioVenta}"/>
				        	</p:column>
				        	<p:column headerText="P. Compra" >
				        		<h:outputText value="Bs.- #{_producto.precioUnitarioCompra}"/>
				        	</p:column>
				        	
				        	<p:column headerText="Fecha Vencimiento">
				        		<h:outputText value="#{_producto.fechaVencimiento}" >
			                      	<f:convertDateTime pattern="dd/MM/yyyy"/>
			                     </h:outputText>
				        	</p:column>
				        	
				        	<p:column headerText="Estado">
				        		<span class="label label-success"><h:outputText rendered="#{_producto.estado=='AC'}" value="Activo" /></span>
				        		<span class="label label-danger"><h:outputText rendered="#{_producto.estado=='IN'}" value="Inactivo" /></span>
				        	</p:column>
				        	
				        	<p:column headerText="Fecha Registro">
				        		<h:outputText value="#{_producto.fechaRegistro}" >
			                      	<f:convertDateTime pattern="dd/MM/yyyy"/>
			                     </h:outputText>
				        	</p:column>
				        	
				        	<p:column headerText="Usuario Registro">
				        		<h:outputText value="#{_producto.usuarioRegistro}" />
				        	</p:column>
				        	
				        </p:dataTable>
      				
      				</div>
      				</div>

		</h:form>
		
	</ui:define>
    
    <ui:define name="footer">
  
    </ui:define>
    
</ui:composition>